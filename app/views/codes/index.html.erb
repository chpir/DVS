<h1>Code</h1>
<p>Here is a list of code snippets that can be applied as rules. You can <%= link_to 'add', new_code_path %> new code.</p>
<table>
  <tr>
    <th>Name</th>
	<th>Description</th>
	<th># Versions</th>
  </tr>

<% @codes.each do |code| %>
  <tr>
    <td><%=h code.name %></td>
	<td><%=h code.description %></td>
	<td><%=h code.code_versions.count %></td>
    <td><%= link_to 'Details', code %></td>
    <td><%= link_to 'Latest source', '#', :onclick => '$j("#code_version_source_'+code.id.to_s+'").modal(); return false;' %></td>
	<td><%= link_to 'Add version', new_code_code_version_path(code) %></td>
    <td><%= link_to 'Edit', edit_code_path(code) %></td>
    <td><%= link_to 'Destroy', code, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<% @codes.each do |code| %>
<div id="code_version_source_<%=code.id -%>" style="display: none;"><textarea style="width: 100%; height: 300px;"><%=code.latest_source -%></textarea></div>
<% end %>

